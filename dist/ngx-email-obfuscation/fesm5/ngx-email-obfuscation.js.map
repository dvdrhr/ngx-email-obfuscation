{"version":3,"file":"ngx-email-obfuscation.js","sources":["ng://ngx-email-obfuscation/lib/ngx-email-obfuscation.directive.ts","ng://ngx-email-obfuscation/lib/ngx-email-obfuscation.module.ts","ng://ngx-email-obfuscation/public-api.ts","ng://ngx-email-obfuscation/ngx-email-obfuscation.ts"],"sourcesContent":["import { Directive, ElementRef, Renderer2, HostListener, OnInit } from '@angular/core';\n\n@Directive({\n  selector: '[emailObfuscation]'\n})\nexport class EmailObfuscation implements OnInit {\n\n  activated = false;\n  emailText: string;\n\n  @HostListener('mouseenter') onMouseEnter() {\n    if (!this.activated) {\n      this.activated = true;\n      this.unobfuscate();\n    }\n  }\n\n  constructor(private element: ElementRef, private renderer: Renderer2) {\n  }\n\n  ngOnInit() {\n    this.obfuscate();\n  }\n\n  obfuscate() {\n    const nativeElement = this.element.nativeElement;\n    const textElement = nativeElement.childNodes[0];\n    this.emailText = textElement.nodeValue;\n\n    this.renderer.removeChild(nativeElement, textElement);\n\n    const span = this.renderer.createElement('span');\n    this.renderer.appendChild(nativeElement, span);\n    this.renderer.setProperty(span, 'style', 'unicode-bidi: bidi-override; direction: rtl;');\n    const reverseText = this.renderer.createText(this.emailText.split('').reverse().join(''));\n    this.renderer.appendChild(span, reverseText);\n  }\n\n  unobfuscate() {\n    const nativeElement = this.element.nativeElement;\n    const textElement = nativeElement.childNodes[0];\n    var emailTextSplitByAt = this.emailText.split('@');\n    var emailTextHtml = '<b>' + emailTextSplitByAt[0] + '</b>' + emailTextSplitByAt[1];\n\n    this.renderer.removeChild(nativeElement, textElement);\n\n    const anchor = this.renderer.createElement('a');\n    this.renderer.appendChild(nativeElement, anchor);\n    this.renderer.appendChild(anchor, this.renderer.createText(this.emailText));\n    this.renderer.setProperty(anchor, 'href', 'mailto:' + this.emailText);\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { EmailObfuscation } from './ngx-email-obfuscation.directive';\n\n@NgModule({\n  declarations: [EmailObfuscation],\n  imports: [\n  ],\n  exports: [EmailObfuscation]\n})\nexport class NgxEmailObfuscationModule { }\n","/*\n * Public API Surface of ngx-email-obfuscation\n */\n\nexport * from './lib/ngx-email-obfuscation.directive';\nexport * from './lib/ngx-email-obfuscation.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}