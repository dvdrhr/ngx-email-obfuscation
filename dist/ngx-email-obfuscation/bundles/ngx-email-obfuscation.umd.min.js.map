{"version":3,"sources":["ng://ngx-email-obfuscation/lib/ngx-email-obfuscation.directive.ts","ng://ngx-email-obfuscation/lib/ngx-email-obfuscation.module.ts"],"names":["EmailObfuscation","element","renderer","this","activated","prototype","onMouseEnter","unobfuscate","ngOnInit","obfuscate","nativeElement","textElement","childNodes","emailText","nodeValue","emailTextSplitByAt","split","removeChild","span","createElement","appendChild","setProperty","reverseText","printKeyBold","createText","reverse","join","boldKey","anchor","core","ɵɵdirectiveInject","ElementRef","Renderer2","selectors","hostBindings","rf","ctx","NgxEmailObfuscationModule","imports","declarations","exports"],"mappings":"oTAmBE,SAAAA,EAAoBC,EAA6BC,GAA7BC,KAAAF,QAAAA,EAA6BE,KAAAD,SAAAA,EAVjDC,KAAAC,WAAY,SAGgBJ,EAAAK,UAAAC,aAA5B,WACOH,KAAKC,YACRD,KAAKC,WAAY,EACjBD,KAAKI,gBAOTP,EAAAK,UAAAG,SAAA,WACEL,KAAKM,aAGPT,EAAAK,UAAAI,UAAA,WACE,IAAMC,EAAgBP,KAAKF,QAAQS,cAC7BC,EAAcD,EAAcE,WAAW,GAC7CT,KAAKU,UAAYF,EAAYG,UAC7B,IAAIC,EAAqBZ,KAAKU,UAAUG,MAAM,KAC9Cb,KAAKD,SAASe,YAAYP,EAAeC,GAEzC,IAAMO,EAAOf,KAAKD,SAASiB,cAAc,QACzChB,KAAKD,SAASkB,YAAYV,EAAeQ,GAEzCf,KAAKD,SAASmB,YAAYH,EAAM,QAAS,gDACzC,IAAMI,EAAcnB,KAAKoB,aACLpB,KAAKD,SAASsB,WAAW,IAAMT,EAAmB,IAAIC,MAAM,IAAIS,UAAUC,KAAK,IAC/EvB,KAAKD,SAASsB,WAAWT,EAAmB,GAAK,IAAMA,EAAmB,IAAIC,MAAM,IAAIS,UAAUC,KAAK,IAG3H,GAFAvB,KAAKD,SAASkB,YAAYF,EAAMI,GAE5BnB,KAAKoB,aAAc,CACrB,IAAII,EAAUxB,KAAKD,SAASiB,cAAc,KAC1ChB,KAAKD,SAASkB,YAAYO,EAASxB,KAAKD,SAASsB,WAAWT,EAAmB,GAAGC,MAAM,IAAIS,UAAUC,KAAK,MAC3GvB,KAAKD,SAASkB,YAAYF,EAAMS,KAIpC3B,EAAAK,UAAAE,YAAA,WACE,IAAMG,EAAgBP,KAAKF,QAAQS,cAC7BC,EAAcD,EAAcE,WAAW,GACzCG,EAAqBZ,KAAKU,UAAUG,MAAM,KAE9Cb,KAAKD,SAASe,YAAYP,EAAeC,GACzC,IAAMiB,EAASzB,KAAKD,SAASiB,cAAc,KAG3C,GAFAhB,KAAKD,SAASkB,YAAYV,EAAekB,GAErCzB,KAAKoB,aAAc,CACrB,IAAII,EAAUxB,KAAKD,SAASiB,cAAc,KAC1ChB,KAAKD,SAASkB,YAAYO,EAASxB,KAAKD,SAASsB,WAAWT,EAAmB,KAC/EZ,KAAKD,SAASkB,YAAYQ,EAAQD,GAGhCxB,KAAKoB,aACPpB,KAAKD,SAASkB,YAAYQ,EAAQzB,KAAKD,SAASsB,WAAW,IAAMT,EAAmB,KAEpFZ,KAAKD,SAASkB,YAAYQ,EAAQzB,KAAKD,SAASsB,WAAWT,EAAmB,GAAK,IAAMA,EAAmB,KAG9GZ,KAAKD,SAASmB,YAAYO,EAAQ,OAAQ,UAAYzB,KAAKU,6CAjElDb,GAAgB6B,EAAAC,kBAAAD,EAAAE,YAAAF,EAAAC,kBAAAD,EAAAG,8CAAhBhC,EAAgBiC,UAAA,CAAA,CAAA,GAAA,mBAAA,KAAAC,aAAA,SAAAC,EAAAC,GAAA,EAAAD,gDAAhBC,EAAA9B,4ECFb,SAAA+B,4CAMaA,iEAAAA,IAAyBC,QAAA,CAJ3B,4EAIED,EAAyB,CAAAE,aAAA,CALrBvC,GAAgBwC,QAAA,CAGrBxC","sourcesContent":["import { Directive, ElementRef, Renderer2, HostListener, OnInit, Input } from '@angular/core';\n\n@Directive({\n  selector: '[emailObfuscation]'\n})\nexport class EmailObfuscation implements OnInit {\n\n  @Input() printKeyBold : boolean;\n\n  activated = false;\n  emailText: string;\n\n  @HostListener('mouseenter') onMouseEnter() {\n    if (!this.activated) {\n      this.activated = true;\n      this.unobfuscate();\n    }\n  }\n\n  constructor(private element: ElementRef, private renderer: Renderer2) {\n  }\n\n  ngOnInit() {\n    this.obfuscate();\n  }\n\n  obfuscate() {\n    const nativeElement = this.element.nativeElement;\n    const textElement = nativeElement.childNodes[0];\n    this.emailText = textElement.nodeValue;\n    var emailTextSplitByAt = this.emailText.split('@');\n    this.renderer.removeChild(nativeElement, textElement);\n\n    const span = this.renderer.createElement('span');\n    this.renderer.appendChild(nativeElement, span);\n\n    this.renderer.setProperty(span, 'style', 'unicode-bidi: bidi-override; direction: rtl;');\n    const reverseText = this.printKeyBold ?\n                        this.renderer.createText('@' + emailTextSplitByAt[1]).split('').reverse().join('') :\n                        this.renderer.createText(emailTextSplitByAt[0] + '@' + emailTextSplitByAt[1]).split('').reverse().join('');\n    this.renderer.appendChild(span, reverseText);\n\n    if (this.printKeyBold) {\n      var boldKey = this.renderer.createElement('b');\n      this.renderer.appendChild(boldKey, this.renderer.createText(emailTextSplitByAt[0].split('').reverse().join('')));\n      this.renderer.appendChild(span, boldKey);\n    }\n  }\n\n  unobfuscate() {\n    const nativeElement = this.element.nativeElement;\n    const textElement = nativeElement.childNodes[0];\n    var emailTextSplitByAt = this.emailText.split('@');\n\n    this.renderer.removeChild(nativeElement, textElement);\n    const anchor = this.renderer.createElement('a');\n    this.renderer.appendChild(nativeElement, anchor);\n\n    if (this.printKeyBold) {\n      var boldKey = this.renderer.createElement('b');\n      this.renderer.appendChild(boldKey, this.renderer.createText(emailTextSplitByAt[0]))\n      this.renderer.appendChild(anchor, boldKey);\n    }\n    \n    if (this.printKeyBold) {\n      this.renderer.appendChild(anchor, this.renderer.createText('@' + emailTextSplitByAt[1]));\n    } else {\n      this.renderer.appendChild(anchor, this.renderer.createText(emailTextSplitByAt[0] + '@' + emailTextSplitByAt[1]));\n    }\n\n    this.renderer.setProperty(anchor, 'href', 'mailto:' + this.emailText);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { EmailObfuscation } from './ngx-email-obfuscation.directive';\n\n@NgModule({\n  declarations: [EmailObfuscation],\n  imports: [\n  ],\n  exports: [EmailObfuscation]\n})\nexport class NgxEmailObfuscationModule { }\n"]}