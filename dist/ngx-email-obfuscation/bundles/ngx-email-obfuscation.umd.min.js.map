{"version":3,"sources":["ng://ngx-email-obfuscation/lib/ngx-email-obfuscation.directive.ts","ng://ngx-email-obfuscation/lib/ngx-email-obfuscation.module.ts"],"names":["EmailObfuscation","element","renderer","this","activated","prototype","onMouseEnter","unobfuscate","ngOnInit","obfuscate","nativeElement","textElement","childNodes","emailText","nodeValue","emailTextSplitByAt","split","removeChild","span","createElement","appendChild","boldKey","createText","reverse","join","setProperty","reverseText","anchor","core","ɵɵdirectiveInject","ElementRef","Renderer2","selectors","hostBindings","rf","ctx","NgxEmailObfuscationModule","imports","declarations","exports"],"mappings":"oTAiBE,SAAAA,EAAoBC,EAA6BC,GAA7BC,KAAAF,QAAAA,EAA6BE,KAAAD,SAAAA,EAVjDC,KAAAC,WAAY,SAGgBJ,EAAAK,UAAAC,aAA5B,WACOH,KAAKC,YACRD,KAAKC,WAAY,EACjBD,KAAKI,gBAOTP,EAAAK,UAAAG,SAAA,WACEL,KAAKM,aAGPT,EAAAK,UAAAI,UAAA,WACE,IAAMC,EAAgBP,KAAKF,QAAQS,cAC7BC,EAAcD,EAAcE,WAAW,GAC7CT,KAAKU,UAAYF,EAAYG,UAC7B,IAAIC,EAAqBZ,KAAKU,UAAUG,MAAM,KAC9Cb,KAAKD,SAASe,YAAYP,EAAeC,GAEzC,IAAMO,EAAOf,KAAKD,SAASiB,cAAc,QACzChB,KAAKD,SAASkB,YAAYV,EAAeQ,GACzC,IAAIG,EAAUlB,KAAKD,SAASiB,cAAc,KAC1ChB,KAAKD,SAASkB,YAAYC,EAASlB,KAAKD,SAASoB,WAAWP,EAAmB,GAAGC,MAAM,IAAIO,UAAUC,KAAK,MAE3GrB,KAAKD,SAASuB,YAAYP,EAAM,QAAS,gDACzC,IAAMQ,EAAcvB,KAAKD,SAASoB,YAAY,IAAMP,EAAmB,IAAIC,MAAM,IAAIO,UAAUC,KAAK,KACpGrB,KAAKD,SAASkB,YAAYF,EAAMQ,GAChCvB,KAAKD,SAASkB,YAAYF,EAAMG,IAElCrB,EAAAK,UAAAE,YAAA,WACE,IAAMG,EAAgBP,KAAKF,QAAQS,cAC7BC,EAAcD,EAAcE,WAAW,GACzCG,EAAqBZ,KAAKU,UAAUG,MAAM,KAE1CK,EAAUlB,KAAKD,SAASiB,cAAc,KAC1ChB,KAAKD,SAASkB,YAAYC,EAASlB,KAAKD,SAASoB,WAAWP,EAAmB,KAE/EZ,KAAKD,SAASe,YAAYP,EAAeC,GACzC,IAAMgB,EAASxB,KAAKD,SAASiB,cAAc,KAC3ChB,KAAKD,SAASkB,YAAYV,EAAeiB,GACzCxB,KAAKD,SAASkB,YAAYO,EAAQN,GAClClB,KAAKD,SAASkB,YAAYO,EAAQxB,KAAKD,SAASoB,WAAW,IAAMP,EAAmB,KAEpFZ,KAAKD,SAASuB,YAAYE,EAAQ,OAAQ,UAAYxB,KAAKU,6CAlDlDb,GAAgB4B,EAAAC,kBAAAD,EAAAE,YAAAF,EAAAC,kBAAAD,EAAAG,8CAAhB/B,EAAgBgC,UAAA,CAAA,CAAA,GAAA,mBAAA,KAAAC,aAAA,SAAAC,EAAAC,GAAA,EAAAD,gDAAhBC,EAAA7B,uCCFb,SAAA8B,4CAMaA,iEAAAA,IAAyBC,QAAA,CAJ3B,4EAIED,EAAyB,CAAAE,aAAA,CALrBtC,GAAgBuC,QAAA,CAGrBvC","sourcesContent":["import { Directive, ElementRef, Renderer2, HostListener, OnInit } from '@angular/core';\n\n@Directive({\n  selector: '[emailObfuscation]'\n})\nexport class EmailObfuscation implements OnInit {\n\n  activated = false;\n  emailText: string;\n\n  @HostListener('mouseenter') onMouseEnter() {\n    if (!this.activated) {\n      this.activated = true;\n      this.unobfuscate();\n    }\n  }\n\n  constructor(private element: ElementRef, private renderer: Renderer2) {\n  }\n\n  ngOnInit() {\n    this.obfuscate();\n  }\n\n  obfuscate() {\n    const nativeElement = this.element.nativeElement;\n    const textElement = nativeElement.childNodes[0];\n    this.emailText = textElement.nodeValue;\n    var emailTextSplitByAt = this.emailText.split('@');\n    this.renderer.removeChild(nativeElement, textElement);\n\n    const span = this.renderer.createElement('span');\n    this.renderer.appendChild(nativeElement, span);\n    var boldKey = this.renderer.createElement('b');\n    this.renderer.appendChild(boldKey, this.renderer.createText(emailTextSplitByAt[0].split('').reverse().join('')));\n\n    this.renderer.setProperty(span, 'style', 'unicode-bidi: bidi-override; direction: rtl;');\n    const reverseText = this.renderer.createText(('@' + emailTextSplitByAt[1]).split('').reverse().join(''));\n    this.renderer.appendChild(span, reverseText);\n    this.renderer.appendChild(span, boldKey);\n  }\n  unobfuscate() {\n    const nativeElement = this.element.nativeElement;\n    const textElement = nativeElement.childNodes[0];\n    var emailTextSplitByAt = this.emailText.split('@');\n\n    var boldKey = this.renderer.createElement('b');\n    this.renderer.appendChild(boldKey, this.renderer.createText(emailTextSplitByAt[0]))\n\n    this.renderer.removeChild(nativeElement, textElement);\n    const anchor = this.renderer.createElement('a');\n    this.renderer.appendChild(nativeElement, anchor);\n    this.renderer.appendChild(anchor, boldKey);\n    this.renderer.appendChild(anchor, this.renderer.createText('@' + emailTextSplitByAt[1]));\n\n    this.renderer.setProperty(anchor, 'href', 'mailto:' + this.emailText);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { EmailObfuscation } from './ngx-email-obfuscation.directive';\n\n@NgModule({\n  declarations: [EmailObfuscation],\n  imports: [\n  ],\n  exports: [EmailObfuscation]\n})\nexport class NgxEmailObfuscationModule { }\n"]}