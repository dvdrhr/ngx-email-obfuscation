{"version":3,"sources":["ng://ngx-email-obfuscation/lib/ngx-email-obfuscation.directive.ts","ng://ngx-email-obfuscation/lib/ngx-email-obfuscation.module.ts"],"names":["EmailObfuscation","element","renderer","this","activated","prototype","onMouseEnter","unobfuscate","ngOnInit","obfuscate","nativeElement","textElement","childNodes","emailText","nodeValue","removeChild","span","createElement","appendChild","setProperty","reverseText","createText","split","reverse","join","emailTextSplitByAt","anchor","core","ɵɵdirectiveInject","ElementRef","Renderer2","selectors","hostBindings","rf","ctx","NgxEmailObfuscationModule","imports","declarations","exports"],"mappings":"oTAiBE,SAAAA,EAAoBC,EAA6BC,GAA7BC,KAAAF,QAAAA,EAA6BE,KAAAD,SAAAA,EAVjDC,KAAAC,WAAY,SAGgBJ,EAAAK,UAAAC,aAA5B,WACOH,KAAKC,YACRD,KAAKC,WAAY,EACjBD,KAAKI,gBAOTP,EAAAK,UAAAG,SAAA,WACEL,KAAKM,aAGPT,EAAAK,UAAAI,UAAA,WACE,IAAMC,EAAgBP,KAAKF,QAAQS,cAC7BC,EAAcD,EAAcE,WAAW,GAC7CT,KAAKU,UAAYF,EAAYG,UAE7BX,KAAKD,SAASa,YAAYL,EAAeC,GAEzC,IAAMK,EAAOb,KAAKD,SAASe,cAAc,QACzCd,KAAKD,SAASgB,YAAYR,EAAeM,GACzCb,KAAKD,SAASiB,YAAYH,EAAM,QAAS,gDACzC,IAAMI,EAAcjB,KAAKD,SAASmB,WAAWlB,KAAKU,UAAUS,MAAM,IAAIC,UAAUC,KAAK,KACrFrB,KAAKD,SAASgB,YAAYF,EAAMI,IAGlCpB,EAAAK,UAAAE,YAAA,WACE,IAAMG,EAAgBP,KAAKF,QAAQS,cAC7BC,EAAcD,EAAcE,WAAW,GACzCa,EAAqBtB,KAAKU,UAAUS,MAAM,KAClBG,EAAmB,GAAcA,EAAmB,GAEhFtB,KAAKD,SAASa,YAAYL,EAAeC,GAEzC,IAAMe,EAASvB,KAAKD,SAASe,cAAc,KAC3Cd,KAAKD,SAASgB,YAAYR,EAAegB,GACzCvB,KAAKD,SAASgB,YAAYQ,EAAQvB,KAAKD,SAASmB,WAAWlB,KAAKU,YAChEV,KAAKD,SAASiB,YAAYO,EAAQ,OAAQ,UAAYvB,KAAKU,6CA5ClDb,GAAgB2B,EAAAC,kBAAAD,EAAAE,YAAAF,EAAAC,kBAAAD,EAAAG,8CAAhB9B,EAAgB+B,UAAA,CAAA,CAAA,GAAA,mBAAA,KAAAC,aAAA,SAAAC,EAAAC,GAAA,EAAAD,yFCF7B,SAAAE,4CAMaA,iEAAAA,IAAyBC,QAAA,CAJ3B,4EAIED,EAAyB,CAAAE,aAAA,CALrBrC,GAAgBsC,QAAA,CAGrBtC","sourcesContent":["import { Directive, ElementRef, Renderer2, HostListener, OnInit } from '@angular/core';\n\n@Directive({\n  selector: '[emailObfuscation]'\n})\nexport class EmailObfuscation implements OnInit {\n\n  activated = false;\n  emailText: string;\n\n  @HostListener('mouseenter') onMouseEnter() {\n    if (!this.activated) {\n      this.activated = true;\n      this.unobfuscate();\n    }\n  }\n\n  constructor(private element: ElementRef, private renderer: Renderer2) {\n  }\n\n  ngOnInit() {\n    this.obfuscate();\n  }\n\n  obfuscate() {\n    const nativeElement = this.element.nativeElement;\n    const textElement = nativeElement.childNodes[0];\n    this.emailText = textElement.nodeValue;\n\n    this.renderer.removeChild(nativeElement, textElement);\n\n    const span = this.renderer.createElement('span');\n    this.renderer.appendChild(nativeElement, span);\n    this.renderer.setProperty(span, 'style', 'unicode-bidi: bidi-override; direction: rtl;');\n    const reverseText = this.renderer.createText(this.emailText.split('').reverse().join(''));\n    this.renderer.appendChild(span, reverseText);\n  }\n\n  unobfuscate() {\n    const nativeElement = this.element.nativeElement;\n    const textElement = nativeElement.childNodes[0];\n    var emailTextSplitByAt = this.emailText.split('@');\n    var emailTextHtml = '<b>' + emailTextSplitByAt[0] + '</b>' + emailTextSplitByAt[1];\n\n    this.renderer.removeChild(nativeElement, textElement);\n\n    const anchor = this.renderer.createElement('a');\n    this.renderer.appendChild(nativeElement, anchor);\n    this.renderer.appendChild(anchor, this.renderer.createText(this.emailText));\n    this.renderer.setProperty(anchor, 'href', 'mailto:' + this.emailText);\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { EmailObfuscation } from './ngx-email-obfuscation.directive';\n\n@NgModule({\n  declarations: [EmailObfuscation],\n  imports: [\n  ],\n  exports: [EmailObfuscation]\n})\nexport class NgxEmailObfuscationModule { }\n"]}