{"version":3,"file":"ngx-email-obfuscation.js","sources":["ng://ngx-email-obfuscation/lib/ngx-email-obfuscation.directive.ts","ng://ngx-email-obfuscation/lib/ngx-email-obfuscation.module.ts","ng://ngx-email-obfuscation/public-api.ts","ng://ngx-email-obfuscation/ngx-email-obfuscation.ts"],"sourcesContent":["import { Directive, ElementRef, Renderer2, HostListener, OnInit, Input } from '@angular/core';\n\n@Directive({\n  selector: '[emailObfuscation]'\n})\nexport class EmailObfuscation implements OnInit {\n\n  @Input() printKeyBold : boolean;\n\n  activated = false;\n  emailText: string;\n\n  @HostListener('mouseenter') onMouseEnter() {\n    if (!this.activated) {\n      this.activated = true;\n      this.unobfuscate();\n    }\n  }\n\n  constructor(private element: ElementRef, private renderer: Renderer2) {\n  }\n\n  ngOnInit() {\n    this.obfuscate();\n  }\n\n  obfuscate() {\n    const nativeElement = this.element.nativeElement;\n    const textElement = nativeElement.childNodes[0];\n    this.emailText = textElement.nodeValue;\n    var emailTextSplitByAt = this.emailText.split('@');\n    this.renderer.removeChild(nativeElement, textElement);\n\n    const span = this.renderer.createElement('span');\n    this.renderer.appendChild(nativeElement, span);\n\n    this.renderer.setProperty(span, 'style', 'unicode-bidi: bidi-override; direction: rtl;');\n    const reverseText = this.printKeyBold ?\n                        this.renderer.createText(('@' + emailTextSplitByAt[1]).split('').reverse().join('')) :\n                        this.renderer.createText((emailTextSplitByAt[0] + '@' + emailTextSplitByAt[1]).split('').reverse().join(''));\n    this.renderer.appendChild(span, reverseText);\n\n    if (this.printKeyBold) {\n      var boldKey = this.renderer.createElement('b');\n      this.renderer.appendChild(boldKey, this.renderer.createText(emailTextSplitByAt[0].split('').reverse().join('')));\n      this.renderer.appendChild(span, boldKey);\n    }\n  }\n\n  unobfuscate() {\n    const nativeElement = this.element.nativeElement;\n    const textElement = nativeElement.childNodes[0];\n    var emailTextSplitByAt = this.emailText.split('@');\n\n    this.renderer.removeChild(nativeElement, textElement);\n    const anchor = this.renderer.createElement('a');\n    this.renderer.appendChild(nativeElement, anchor);\n\n    if (this.printKeyBold) {\n      var boldKey = this.renderer.createElement('b');\n      this.renderer.appendChild(boldKey, this.renderer.createText(emailTextSplitByAt[0]))\n      this.renderer.appendChild(anchor, boldKey);\n    }\n    \n    if (this.printKeyBold) {\n      this.renderer.appendChild(anchor, this.renderer.createText('@' + emailTextSplitByAt[1]));\n    } else {\n      this.renderer.appendChild(anchor, this.renderer.createText(emailTextSplitByAt[0] + '@' + emailTextSplitByAt[1]));\n    }\n\n    this.renderer.setProperty(anchor, 'href', 'mailto:' + this.emailText);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { EmailObfuscation } from './ngx-email-obfuscation.directive';\n\n@NgModule({\n  declarations: [EmailObfuscation],\n  imports: [\n  ],\n  exports: [EmailObfuscation]\n})\nexport class NgxEmailObfuscationModule { }\n","/*\n * Public API Surface of ngx-email-obfuscation\n */\n\nexport * from './lib/ngx-email-obfuscation.directive';\nexport * from './lib/ngx-email-obfuscation.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}